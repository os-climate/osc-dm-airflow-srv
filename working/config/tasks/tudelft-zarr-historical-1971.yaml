
task:

  task_id: tudelft-zarr-historical-1971
  type: docker

  image: registry.arfima.com/project-x/dockersandbox/dbroda/com.brodagroup.hazards.task
  container_name: com.brodagroup.hazards.task-tudelft-zarr-historical-1971
  api_version: auto
  auto_remove: true
  docker_url: unix://var/run/docker.sock
  docker_conn_id: prx_registry
  network_mode: bridge
  command: "
  python /app/src/cli.py load \
    --bucket physrisk-hazard-indicators \
    --store hazard/hazard.zarr \
    --input_dir \"/opt/airflow/data/\" \
    --output_dir \"/opt/airflow/geodatabases/zarr\" \
    --model_class \"hazard.onboard.tudelft_flood.TUDelftRiverFlood\" \
    --scenario \"historical\" \
    --year \"1971\"
  "

  mounts:
    - ${RAW_DATA_DIR}/:/opt/airflow/data
    - ${WORKING_DIR}/output:/opt/airflow/geodatabases
    - ${WORKING_DIR}/task_files:/opt/airflow/task_files
